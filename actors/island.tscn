[gd_scene load_steps=10 format=3 uid="uid://bu1g3ij4mtfhj"]

[ext_resource type="Script" path="res://actors/island.gd" id="1_0d0km"]
[ext_resource type="Script" path="res://actors/glv.gd" id="2_pg5or"]
[ext_resource type="TileSet" uid="uid://bxwxldjtw4p8n" path="res://world/island_tileset.tres" id="4_bmc6s"]
[ext_resource type="Script" path="res://actors/pops.gd" id="4_q8gvr"]
[ext_resource type="Script" path="res://scripts/highlighter.gd" id="5_hc6sn"]
[ext_resource type="PackedScene" uid="uid://cxdx1cm2a7b4t" path="res://ui/species_grid.tscn" id="6_e82f1"]

[sub_resource type="Gradient" id="Gradient_trq5i"]
offsets = PackedFloat32Array(0.507042, 0.584507, 0.647887)
colors = PackedColorArray(0, 0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 0)

[sub_resource type="GradientTexture2D" id="GradientTexture2D_k4nnm"]
gradient = SubResource("Gradient_trq5i")
fill = 1
fill_from = Vector2(0.5, 0.5)
metadata/_snap_enabled = true

[sub_resource type="RectangleShape2D" id="RectangleShape2D_8wx60"]
size = Vector2(200, 200)

[node name="Island" type="Node2D"]
script = ExtResource("1_0d0km")

[node name="TileMap" type="TileMap" parent="."]
z_index = -1
tile_set = ExtResource("4_bmc6s")
format = 2
layer_0/tile_data = PackedInt32Array(-131072, 65536, 1, -65536, 65536, 1, -1, 65536, 1, 65535, 65536, 1, 0, 65536, 1, -65535, 65536, 1, -131071, 65536, 1, -2, 65536, 1, -65537, 65536, 1, -3, 65536, 1, 65533, 65536, 1, 65534, 65536, 1, 131068, 0, 2, 196605, 0, 1, 262141, 0, 1, 327678, 65536, 2, 262144, 131072, 2, 327679, 65536, 2, 196609, 131072, 2, 65538, 327680, 1, 131073, 327680, 1, 3, 327680, 2, -65533, 131072, 1, -196605, 131072, 0, -131069, 131072, 1, -196606, 327680, 2, -262142, 131072, 0, -262144, 65536, 0, -262143, 65536, 0, -196609, 65536, 0, -131075, 65536, 0, -196610, 0, 0, -65540, 393216, 2, -5, 0, 1, 65531, 0, 2, 131070, 65536, 1, 131069, 393216, 1, 131072, 65536, 1, 131071, 65536, 1, 65540, 131072, 2, 65539, 65536, 2, 131074, 131072, 2, 4, 131072, 0, -65534, 65536, 1, 65536, 65536, 1, 1, 65536, 1, 2, 65536, 1, 65537, 65536, 1, 196607, 65536, 1, 262142, 65536, 1, 196606, 65536, 1, -65538, 65536, 1, -131074, 393216, 2, -196608, 65536, 1, -196607, 65536, 1, 196608, 327680, 1, 262143, 65536, 1, 327677, 0, 2, 65532, 393216, 1, -4, 65536, 1, -65541, 0, 0, -131076, 0, 0, -131070, 65536, 1, -131073, 65536, 1, -65539, 65536, 1)

[node name="GLV" type="Node2D" parent="."]
position = Vector2(-250, -143)
script = ExtResource("2_pg5or")

[node name="GLVTimer" type="Timer" parent="GLV"]
wait_time = 0.1
autostart = true

[node name="Pops" type="Node2D" parent="."]
position = Vector2(-80, -16)
script = ExtResource("4_q8gvr")

[node name="SpeciesGrid" parent="." instance=ExtResource("6_e82f1")]
anchors_preset = 2
anchor_top = 1.0
anchor_bottom = 1.0
offset_left = -48.0
offset_top = 85.0
offset_right = -48.0
offset_bottom = 85.0
grow_vertical = 0

[node name="Highlight" type="Polygon2D" parent="."]
visible = false
texture = SubResource("GradientTexture2D_k4nnm")
texture_offset = Vector2(32, 32)
polygon = PackedVector2Array(-122, -114, 146, -113, 147, 118, -122, 116, -122, -63.8913)

[node name="Area2D" type="Area2D" parent="."]
script = ExtResource("5_hc6sn")

[node name="CollisionShape2D" type="CollisionShape2D" parent="Area2D"]
shape = SubResource("RectangleShape2D_8wx60")

[connection signal="densities_update" from="GLV" to="Pops" method="_on_glv_densities_update"]
[connection signal="num_species_changed" from="GLV" to="Pops" method="_on_glv_num_species_changed"]
[connection signal="species_changed" from="GLV" to="SpeciesGrid" method="_on_glv_species_changed"]
[connection signal="change_growth" from="SpeciesGrid" to="GLV" method="change_growth"]
[connection signal="change_mutuality" from="SpeciesGrid" to="GLV" method="change_mutuality"]
[connection signal="island_clicked" from="Area2D" to="." method="_on_area_2d_island_clicked"]
